<!DOCTYPE html>
<html lang="zh">
<head>
<meta charset="UTF-8">
<title>武器改装交互图</title>
<style>
  body { 
    display: flex; 
    font-family: sans-serif; 
    flex-direction: column;
    align-items: center;
  }
  #details {
    margin-left: 20px;
    padding: 10px;
    width: 320px;
    border: 1px solid #ccc;
    background: #fafafa;
  }
  #content {
    display: flex;
    margin-bottom: 20px;
  }
  #legend {
    margin-top: 20px;
    padding: 10px;
    border: 1px solid #ccc;
    background: #fafafa;
    width: 900px;
  }
  .legend-item {
    display: flex;
    align-items: center;
    margin: 5px 0;
  }
  .legend-color {
    width: 20px;
    height: 20px;
    border: 2px solid #000;
    margin-right: 10px;
  }
</style>
</head>
<body>

<div id="content">
  <canvas id="mapCanvas" width="900" height="900" style="border:1px solid #ccc;"></canvas>

  <div id="details">
    <h3>改装方案</h3>
    <div id="weaponName">点击武器查看方案</div>
    <div id="weaponMods"></div>
  </div>
</div>

<div id="legend">
  <h3>武器等级图例</h3>
  <div class="legend-item"><div class="legend-color" style="background-color: red;"></div><div>T1 - 版本答案</div></div>
  <div class="legend-item"><div class="legend-color" style="background-color: orange;"></div><div>T2 - 有特长的枪</div></div>
  <div class="legend-item"><div class="legend-color" style="background-color: yellow;"></div><div>T3 - 开枪装装样子</div></div>
  <div class="legend-item"><div class="legend-color" style="background-color: green;"></div><div>T4 - 除了便宜没有存在的意义</div></div>
</div>

<script>
const canvas = document.getElementById('mapCanvas');
const ctx = canvas.getContext('2d');

const centerX = canvas.width / 2;
const centerY = canvas.height / 2;

// ===== 可调参数 =====
const logicRange = 10;                  // 逻辑坐标范围
const pointRadius = 10;                 // 圆点半径
const outlineColor = "#000";            // 圆点轮廓颜色
const outlineWidth = 3;                 // 圆点轮廓粗细
// ====================

const scale = (canvas.width / 2) / logicRange; // 每单位逻辑坐标对应像素

// 绘制坐标轴和象限
function drawAxes() {
  ctx.clearRect(0, 0, canvas.width, canvas.height);

  ctx.fillStyle = "#fff";
  ctx.fillRect(0, 0, canvas.width, canvas.height);

  ctx.strokeStyle = "#000";
  ctx.lineWidth = 2;

  // X 轴
  ctx.beginPath();
  ctx.moveTo(0, centerY);
  ctx.lineTo(canvas.width, centerY);
  ctx.stroke();

  // Y 轴
  ctx.beginPath();
  ctx.moveTo(centerX, 0);
  ctx.lineTo(centerX, canvas.height);
  ctx.stroke();

  // 坐标轴标签
  ctx.font = "20px sans-serif";
  ctx.fillStyle = "#000";
  ctx.textAlign = "center";
  ctx.fillText("控枪容易程度 →", canvas.width - 100, centerY - 10);

  ctx.save();
  ctx.translate(centerX - 60, 50);
  ctx.rotate(-Math.PI / 2);
  ctx.fillText("作战距离 →", 0, 0);
  ctx.restore();

  // 象限标签
  ctx.font = "bold 60px sans-serif";
  ctx.fillStyle = "rgba(200,200,200,0.5)";
  ctx.textAlign = "center";
  ctx.fillText("被狙击完爆区", centerX - 200, centerY - 200);
  ctx.fillText("新手区", centerX + 200, centerY - 200);
  ctx.fillText("猛男区", centerX - 200, centerY + 200);
  ctx.fillText("进阶区", centerX + 200, centerY + 200);
}

// 武器数据（逻辑坐标）
const weapons = [
  { name: "M4A1", x: 0, y: 0, color: "green" },
  //T1
  { name: "M14", x: -6, y: -7, color: "red" },
  { name: "AS VAL", x: -6, y: -6, color: "red" },
  { name: "腾龙", x: 3, y: 1, color: "red" },
  { name: "SR-3M", x: 5, y: -6, color: "red" },
  //T2
  { name: "M7", x: -1, y: 5, color: "orange" },
  { name: "K416", x: 4, y: -4, color: "orange" },
  { name: "K437", x: 4, y: 4, color: "orange" },
  { name: "MP7", x: 8.5, y: -9, color: "orange" },
  //T3
  { name: "AKM", x: -3, y: 1, color: "yellow" },
  { name: "AUG", x: 8, y: 7, color: "yellow" },
  { name: "AK-12", x: 7, y: 5, color: "yellow" },
  { name: "ASH-12", x: -9, y: 0, color: "yellow" },
  { name: "SCAR-H", x: -2, y: 2, color: "yellow" },
  //T4
  { name: "G3", x: 0, y: 6, color: "green" },
  { name: "QBZ95-1", x: 8, y: 6.5, color: "green" },
  { name: "MP5", x: 9, y: -9, color: "green" }
];

// 改装方案
const weaponData = {
  "M4A1": [
    { name: "屎枪一把，纯粹做锚点用", code: "不值得多花一分钟用它", price: "不值得多花一分钱改它" }
  ],
  "M14": [
    { name: "低改", code: "M14射手步枪-烽火地带-6H5D9D4072GLCC97UAN1F", price: "55w" },
    { name: "满改", code: "M14射手步枪-烽火地带-6H5DA1K072GLCC97UAN1F", price: "70w" }
  ],
  "腾龙": [
    { name: "烂改", code: "腾龙突击步枪-烽火地带-6H5DAG4072GLCC97UAN1F", price: "36w" },
    { name: "满改", code: "腾龙突击步枪-烽火地带-6H5DAKC072GLCC97UAN1F", price: "50w" },
    { name: "近距离版", code: "腾龙突击步枪-烽火地带-6H5DAO8072GLCC97UAN1F", price: "30w" }
  ],
  "AS VAL": [
    { name: "低改", code: "AS Val突击步枪-烽火地带-6H5DB3S072GLCC97UAN1F", price: "30w" },
    { name: "满改", code: "AS Val突击步枪-烽火地带-6H5DB6S072GLCC97UAN1F", price: "50w" }
  ],
  "SR-3M": [
    { name: "100腰射版", code: "SR-3M紧凑突击步枪-烽火地带-6H5DBCK072GLCC97UAN1F", price: "35w" },
    { name: "均衡", code: "SR-3M紧凑突击步枪-烽火地带-6H5DBNK072GLCC97UAN1F", price: "40w" },
    { name: "这枪不适合满改", code: "改满了打中距离还是不行", price: "别多花冤枉钱了" }
  ],
  "M7": [
    { name: "低改", code: "M7战斗步枪-烽火地带-6H5E6H8072GLCC97UAN1F", price: "38w" },
    { name: "满改", code: "M7战斗步枪-烽火地带-6H5E6OG072GLCC97UAN1F", price: "50w" }
  ],
  "K416": [
    { name: "低改", code: "K416突击步枪-烽火地带-6H5E75C072GLCC97UAN1F", price: "38w" },
    { name: "满改", code: "K416突击步枪-烽火地带-6H5E80K072GLCC97UAN1F", price: "60w" }
  ],
  "K437": [
    { name: "低改", code: "K437突击步枪-烽火地带-6H5E864072GLCC97UAN1F", price: "35w" },
    { name: "满改", code: "K437突击步枪-烽火地带-6H5E8J8072GLCC97UAN1F", price: "50w" }
  ],
  "MP7": [
    { name: "低改", code: "MP7冲锋枪-烽火地带-6H5EA3S072GLCC97UAN1F", price: "35w" },
    { name: "满改", code: "MP7冲锋枪-烽火地带-6H5EA7S072GLCC97UAN1F", price: "50w" }
  ],
  "SCAR-H": [
    { name: "高威力型", code: "SCAR-H_POWER", price: 900 },
    { name: "远射程型", code: "SCAR-H_LONG", price: 1000 },
    { name: "轻量化型", code: "SCAR-H_LITE", price: 850 }
  ]
};

// 逻辑坐标转像素坐标
function logicToPixelX(x) {
  return centerX + x * scale;
}
function logicToPixelY(y) {
  return centerY - y * scale;
}

// 绘制武器点
function drawWeapons() {
  weapons.forEach(w => {
    ctx.beginPath();
    ctx.arc(logicToPixelX(w.x), logicToPixelY(w.y), pointRadius, 0, Math.PI * 2);
    ctx.fillStyle = w.color;
    ctx.fill();
    ctx.strokeStyle = outlineColor;
    ctx.lineWidth = outlineWidth;
    ctx.stroke();
  });
}

// 点击事件
canvas.addEventListener('click', e => {
  const rect = canvas.getBoundingClientRect();
  const mouseX = e.clientX - rect.left;
  const mouseY = e.clientY - rect.top;

  weapons.forEach(w => {
    const dx = mouseX - logicToPixelX(w.x);
    const dy = mouseY - logicToPixelY(w.y);
    if (Math.sqrt(dx*dx + dy*dy) < pointRadius) {
      const mods = weaponData[w.name] || [];
      document.getElementById('weaponName').textContent = w.name;
      document.getElementById('weaponMods').innerHTML = mods.map(m => `
        <div><b>${m.name}</b></div>
        <div>代码: ${m.code}</div>
        <div>价格: ${m.price}</div>
      `).join('<hr>');
    }
  });
});

// 初始化
drawAxes();
drawWeapons();
</script>

</body>
</html>
